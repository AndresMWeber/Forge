machine:
  services:
    - docker

dependencies:
    override:
      - pip install docker-compose
    pre:
      - docker build --rm=false -t forge .

test:
  override:
    - docker run -it forge bash -c "mayapy -m nose /Forge/tests --with-coverage --cover-package=forge"
  post:
    - docker run -it forge bash -c "mayapy -m pip install coveralls"
    - docker run -it forge bash -c "coveralls"

deployment:
  production:
    branch: master
