machine:
  services:
    - docker

dependencies:
    override:
      - pip install docker-compose
      - pip install coveralls
    pre:
      - docker build --rm=false -t forge .

test:
  override:
    - docker run -it forge bash -c "mayapy -m nose --with-coverage --cover-package=forge /Forge/tests"
    - docker run --rm -v forge
  post:
    - coveralls

deployment:
  production:
    branch: master
