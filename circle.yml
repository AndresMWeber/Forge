machine:
  services:
    - docker

dependencies:
    override:
      - pip install docker-compose
    pre:
      - docker build --rm=false -t forge .
      - docker run -it forge bash -c "mayapy -m pip install coveralls"

test:
  override:
    - docker run -it forge bash -c "mayapy -m nose --with-coverage --cover-package=forge /Forge/tests"
  post:
    - docker run -it forge bash -c "coveralls"

deployment:
  production:
    branch: master
